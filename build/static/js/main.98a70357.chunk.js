(this["webpackJsonpcapgemini-techchallenge"]=this["webpackJsonpcapgemini-techchallenge"]||[]).push([[0],{262:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),s=n.n(c),o=n(4),i=n(242),u=(n(262),n(500)),d=n(30),l=n(48),j=n(466),b=n(469),m=n(419),p=n(471),h=n(472),O=n(470),f={isAuthenticated:!1,isUserAdmin:!1,username:"",signin:function(e,t,n){f.isAuthenticated=!0,f.isUserAdmin=!1,f.username=e,"admin"==t&&(f.isUserAdmin=!0),setTimeout(n,100)},signout:function(e){f.isAuthenticated=!1,f.isUserAdmin=!1,setTimeout(e,100)}},x=r.a.createContext(f),v=n(16),g=n(1),y=Object(a.createContext)(),S={isAuthenticated:!1,isUserAdmin:!1,username:"",signin:function(e,t,n){S.isAuthenticated=!0,S.isUserAdmin=!1,S.username=e,"admin"==t&&(S.isUserAdmin=!0),setTimeout(n,100)},signout:function(e){S.isAuthenticated=!1,S.isUserAdmin=!1,S.username="",setTimeout(e,100)}};function D(e){var t=e.children,n=function(){var e=Object(a.useState)(null),t=Object(v.a)(e,2),n=t[0],r=t[1];return{user:n,signin:function(e,t,n){return S.signin(e,t,(function(){console.log(e,t),r({username:e,role:t,isAuthenticated:!0,isUserLoggedIn:!0}),n()}))},signout:function(e){return S.signout((function(){r(null),e()}))}}}();return Object(g.jsx)(y.Provider,{value:n,children:t})}function C(){return Object(a.useContext)(y)}var w=function(){var e=C(),t=e.user,n=e.signout,a=Object(d.g)();return Object(g.jsx)(j.a,{elevation:0,children:Object(g.jsxs)(b.a,{children:[Object(g.jsx)(m.a,{component:l.b,edge:"start",color:"inherit",children:Object(g.jsx)(O.a,{})}),Object(g.jsx)(u.a,{mx:1,children:Object(g.jsx)(p.a,{color:"inherit",variant:"body1",component:l.b,to:"/my-dashboard",underline:"none",children:"My Dashboards"})}),Object(g.jsxs)(u.a,{display:"flex",children:[t&&"admin"==t.role&&Object(g.jsx)(u.a,{mx:1,children:Object(g.jsx)(p.a,{color:"inherit",variant:"body1",component:l.b,to:"/datasources",underline:"none",children:"DataSources"})}),t&&"admin"==t.role&&Object(g.jsx)(u.a,{mx:1,children:Object(g.jsx)(p.a,{color:"inherit",variant:"body1",component:l.b,to:"/components",underline:"none",children:"Components"})}),t&&"admin"==t.role&&Object(g.jsx)(u.a,{mx:1,children:Object(g.jsx)(p.a,{color:"inherit",variant:"body1",component:l.b,to:"/usermanagement",underline:"none",children:"User Management"})}),t&&"admin"==t.role&&Object(g.jsx)(u.a,{mx:1,children:Object(g.jsx)(p.a,{color:"inherit",variant:"body1",component:l.b,to:"/dashboard",underline:"none",children:"Dashboard Management"})})]}),!t&&Object(g.jsx)(u.a,{ml:"auto",children:Object(g.jsx)(h.a,{edge:"end",color:"secondary",variant:"contained",onClick:function(){return a.push("/")},children:"Go To Login Screen"})}),t&&t.isAuthenticated&&Object(g.jsx)(u.a,{ml:"auto",children:Object(g.jsx)(h.a,{edge:"end",color:"secondary",variant:"contained",onClick:function(){return n((function(){return a.push("/")}))},children:"LogOut"})})]})})},k=n(42),U=n(19),A=n.n(U),T=n(32),I=(n(7),n(473)),L=n(474),_=n(475),z=n(479),B=n(499),P=n(506),W=n(56),E=n(29),F=function(){var e=r.a.useContext(x),t=e.isAuthenticated,n=(e.isUserAdmin,e.signin,C()),c=Object(E.useIndexedDB)("users"),s=c.getByIndex,i=c.add,l=Object(d.g)();Object(a.useEffect)((function(){if(t)return l.push("/datasources");s("username","admin").then((function(e){void 0==e&&i({username:"admin",password:"admin",role:"admin"})}))}),[]);var j=r.a.useState({username:"",password:"",errors:{message:"",status:!1}}),b=Object(v.a)(j,2),m=b[0],p=b[1],O=function(){var e=Object(T.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!m.username||!m.password){e.next=10;break}return e.next=4,s("username",m.username);case 4:if(!(a=e.sent)||a.password!==m.password){e.next=7;break}return e.abrupt("return",n.signin(a.username,a.role,(function(){return l.push("/my-dashboard")})));case 7:if(a){e.next=9;break}return e.abrupt("return",p((function(e){return Object(o.a)(Object(o.a)({},e),{},{username:"",password:"",errors:{message:"User Not Found! Try Again",status:!0}})})));case 9:return e.abrupt("return",p((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:"",errors:{message:"Invalid Password!!",status:!0}})})));case 10:return e.abrupt("return",p((function(e){return Object(o.a)(Object(o.a)({},e),{},{errors:{message:"Enter Credentials!!",status:!0}})})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){return p((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t,e.target.value))}))};return Object(g.jsx)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",my:3,p:2,mx:"auto",children:Object(g.jsxs)(I.a,{style:{padding:8},children:[Object(g.jsx)(L.a,{avatar:Object(g.jsx)(P.a,{"aria-label":"recipe",children:"L"}),title:"User Login",titleTypographyProps:{variant:"h6"}}),Object(g.jsxs)("form",{onSubmit:O,children:[Object(g.jsx)(_.a,{children:Object(g.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(g.jsx)(B.a,{placeholder:"Username",size:"small",variant:"outlined",fullWidth:!0,value:m.username,onChange:function(e){return f(e,"username")},style:{marginBottom:16}}),Object(g.jsx)(B.a,{placeholder:"Password",size:"small",variant:"outlined",type:"password",value:m.password,onChange:function(e){return f(e,"password")},fullWidth:!0})]})}),Object(g.jsx)(z.a,{disableSpacing:!0,children:Object(g.jsx)(u.a,{px:1,width:"100%",children:Object(g.jsx)(h.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Login"})})})]}),m.errors.status&&Object(g.jsx)(W.a,{variant:"body2",children:Object(g.jsx)(u.a,{color:"error.main",textAlign:"center",children:m.errors.message})})]})})},q=n(481),R=n(478),N=n(483),V=n(420),J=n(484),M=n(507),K=n(480),G=n(476),H=n(477),Q=n(505),X=n(482),Y=n(503),Z=function(e){var t=r.a.useState({username:"",password:"",role:""}),n=Object(v.a)(t,2),a=n[0],c=n[1],s=e.title,i=void 0===s?"Create User":s,d=e.onSubmit,l=e.User,j=e.type,b=e.deleteUser;r.a.useEffect((function(){"edit"===j&&c(l)}),[l]);var m=function(e,t){c((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t,e.target.value))}))},p=function(){return"edit"===j};return Object(g.jsxs)(K.a,{children:[Object(g.jsx)(W.a,{variant:"body1",gutterBottom:!0,children:i}),Object(g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d(a),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{username:"",password:"",role:""})}))},children:Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:1,children:[Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{id:"username",placeholder:"Username",value:a.username,onChange:function(e){return m(e,"username")},variant:"outlined",size:"small",disabled:p()})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{id:"password",placeholder:"Password",type:"password",value:a.password,onChange:function(e){return m(e,"password")},variant:"outlined",size:"small",disabled:p()})})]})}),Object(g.jsx)(q.a,{container:!0,children:Object(g.jsx)(u.a,{m:1,children:Object(g.jsx)(q.a,{item:!0,children:Object(g.jsxs)(G.a,{component:"fieldset",children:[Object(g.jsx)(H.a,{component:"legend",children:"User Role"}),Object(g.jsxs)(Q.a,{"aria-label":"role",name:"role",value:a.role,onChange:function(e){return m(e,"role")},row:!0,children:[Object(g.jsx)(X.a,{value:"admin",control:Object(g.jsx)(Y.a,{size:"small"}),label:"Admin"}),Object(g.jsx)(X.a,{value:"user",control:Object(g.jsx)(Y.a,{size:"small"}),label:"User"})]})]})})})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"secondary",fullWidth:!0,variant:"contained",size:"small",type:"submit",style:{textTransform:"none"},children:i})}),p()&&Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"primary",fullWidth:!0,variant:"contained",size:"small",onClick:function(e){e.preventDefault(),b(a),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{username:"",password:"",role:""})}))},style:{textTransform:"none"},children:"Delete User"})})]})})})]})},$=function(){var e=r.a.useState({users:[],loader:{status:!0,message:"Fetching Users!!"},error:{status:!1,message:""},selectedUser:{}}),t=Object(v.a)(e,2),n=t[0],a=t[1];r.a.useEffect((function(){i().then((function(e){a((function(t){return Object(o.a)(Object(o.a)({},t),{},{users:e,loader:{message:"User List Fetched!",status:!1}})}))}))}),[n.loader.status]);var c=Object(E.useIndexedDB)("users"),s=c.add,i=c.getAll,d=c.update,l=c.deleteRecord,j=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s(t);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{loader:{message:"Updating User List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(A.a.mark((function e(t){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.role)){e.next=6;break}return e.next=4,d(Object(o.a)(Object(o.a)({},n.selectedUser),{},{role:r}));case 4:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedUser:{},loader:{message:"Updating User List!",status:!0}})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,l(n.selectedUser.id);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedUser:{},loader:{message:"Updating User List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(q.a,{container:!0,children:[Object(g.jsxs)(q.a,{item:!0,lg:1.5,alignItems:"center",direction:"column",justifyContent:"center",children:[Object(g.jsx)(h.a,{color:"secondary",size:"small",fullWidth:!0,style:{textTransform:"none"},variant:"contained",onClick:function(){a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedUser:{}})}))},children:"Create New User"}),Object(g.jsx)(R.a,{component:"nav",subheader:Object(g.jsx)(N.a,{component:"div",id:"nested-list-subheader",children:"Available Users"}),children:n.users.map((function(e){var t=e.id,r=e.username,c=e.role,s=e.password;return Object(g.jsx)(V.a,{button:!0,selected:t===n.selectedUser.id,onClick:function(){return e={id:t,username:r,role:c,password:s},void a((function(t){return Object(o.a)(Object(o.a)({},t),{},{selectedUser:e})}));var e},children:Object(g.jsxs)(J.a,{children:[Object(g.jsx)(u.a,{mr:1,component:"span",children:Object(g.jsx)(W.a,{variant:"body1",component:"span",children:r})}),Object(g.jsx)(M.a,{size:"small",label:c,color:"admin"===c?"primary":"secondary"})]})})}))})]}),Object(g.jsxs)(q.a,{item:!0,children:[!n.selectedUser.username&&Object(g.jsx)(Z,{type:"add",title:"Add User",onSubmit:j}),!!n.selectedUser.username&&Object(g.jsx)(Z,{type:"edit",title:"Edit User",User:n.selectedUser,onSubmit:b,deleteUser:m})]})]})},ee=n(491),te=n(486),ne=n(490),ae=n(489),re=n(485),ce=n(487),se=n(488),oe=n(243),ie=function(e){var t=e.title,n=e.rows,a=e.column,r=e.totalRows,c=void 0===r?5:r,s=e.totalCols,o=void 0===s?5:s;return Object(g.jsxs)(g.Fragment,{children:[t&&Object(g.jsx)(W.a,{variant:"h6",gutterBottom:!0,children:t}),Object(g.jsx)(re.a,{component:oe.a,children:Object(g.jsxs)(te.a,{children:[Object(g.jsx)(ce.a,{children:Object(g.jsx)(se.a,{children:a&&a.map((function(e,t){if(t<o)return Object(g.jsxs)(ae.a,{children:[" ",e.toUpperCase()," "]},"preview-tbl-header-".concat(t))}))})}),Object(g.jsx)(ne.a,{children:n&&n.map((function(e,t){if(t<c)return Object(g.jsx)(se.a,{children:a.map((function(t,n){if(n<o)return Object(g.jsxs)(ae.a,{component:"th",scope:"row",children:[" ",e[t]||"-"," "]},"preview-tb-cell-".concat(n))}))},"preview-tbl-".concat(t))}))})]})})]})},ue=function(e){var t=r.a.useState({name:"",type:"default_option",data:null}),n=Object(v.a)(t,2),a=n[0],c=n[1],s=e.title,i=void 0===s?"Create DataSource":s,d=e.onSubmit,l=e.DataSource,j=e.type,b=e.deleteDataSource;r.a.useEffect((function(){"edit"===j&&c(l)}),[l]);r.a.useContext(x);var m=function(e,t){c((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t,e.target.value))}))},p=function(){return"edit"===j};return Object(g.jsxs)(K.a,{children:[Object(g.jsx)(W.a,{variant:"body1",gutterBottom:!0,children:i}),Object(g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d(a),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:"",data:null,type:"default_option"})}))},children:Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:1,children:[Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{id:"dataSourcename",placeholder:"DataSourcename",value:a.name,onChange:function(e){return m(e,"name")},variant:"outlined",size:"small",disabled:p()})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsxs)(B.a,{select:!0,size:"small",variant:"outlined",placeholder:"Select a DataSource Type",SelectProps:{value:a.type},onChange:function(e){return m(e,"type")},disabled:p(),children:[Object(g.jsx)(ee.a,{value:"default_option",disabled:!0,children:"Select a DataSource Type"}),Object(g.jsx)(ee.a,{value:"rest_api",children:"Rest API"}),Object(g.jsx)(ee.a,{value:"graphql_api",disabled:!0,children:"GraphQL API"}),Object(g.jsx)(ee.a,{value:"soap_api",disabled:!0,children:"SOAP API"})]})})]})}),Object(g.jsxs)(q.a,{container:!0,style:{margin:8},spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsxs)(h.a,{variant:"contained",component:"label",color:"primary",fullWidth:!0,size:"small",style:{textTransform:"none"},children:["Upload File",Object(g.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var t=new FileReader;if(t.onloadend=function(t){try{var n=JSON.parse(t.target.result);n&&n.length&&c((function(e){return Object(o.a)(Object(o.a)({},e),{},{data:n})}))}catch(e){alert("Error Occured While Parsing JSON File. Please Valiate JSON before uploading.")}},e.target.files[0]){var n=e.target.files[0];if("json"!=n.name.split(".").pop().toLowerCase())return alert("Only Json File Supported!!");t.readAsText(n)}}})]})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"secondary",fullWidth:!0,variant:"contained",size:"small",type:"submit",style:{textTransform:"none"},children:i})}),p()&&Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"primary",fullWidth:!0,variant:"contained",size:"small",onClick:function(e){e.preventDefault(),b(a),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{dataSourcename:"",password:"",role:""})}))},style:{textTransform:"none"},children:"Delete DataSource"})})]})]})})}),a&&a.data&&Object(g.jsx)(q.a,{container:!0,children:Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(ie,{rows:a.data,column:Object.keys(a.data[0])})})})]})},de=function(){var e=r.a.useState({dataSources:[],loader:{status:!0,message:"Fetching Available Data Source!!"},error:{status:!1,message:""},selectedDataSource:{}}),t=Object(v.a)(e,2),n=t[0],a=t[1],c=r.a.useContext(x),s=(c.isAuthenticated,c.isUserAdmin,c.signin,Object(E.useIndexedDB)("datasources")),i=s.add,d=s.getAll,l=s.update,j=s.deleteRecord;r.a.useEffect((function(){d().then((function(e){a((function(t){return Object(o.a)(Object(o.a)({},t),{},{dataSources:e,loader:{message:"Data Source List Fetched!",status:!1}})}))}))}),[n.loader.status]);var b=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,i(t);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{loader:{message:"Updating DataSource List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(T.a)(A.a.mark((function e(t){var r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,c=t.data,!r){e.next=6;break}return e.next=4,l(Object(o.a)(Object(o.a)({},n.selectedDataSource),{},{name:r,data:c}));case 4:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDataSource:{},loader:{message:"Updating DataSource List!",status:!0}})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,j(n.selectedDataSource.id);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDataSource:{},loader:{message:"Updating DataSource List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(q.a,{container:!0,style:{flexWrap:"nowrap"},children:[Object(g.jsxs)(q.a,{item:!0,lg:2,alignItems:"center",direction:"column",justifyContent:"center",children:[Object(g.jsx)(h.a,{color:"secondary",size:"small",fullWidth:!0,style:{textTransform:"none"},variant:"contained",onClick:function(){a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDataSource:{}})}))},children:"Create New DataSource"}),Object(g.jsx)(R.a,{component:"nav",subheader:Object(g.jsx)(N.a,{component:"div",id:"nested-list-subheader",children:"Available DataSources"}),children:n.dataSources.map((function(e){var t=e.id,r=e.name,c=e.type,s=e.data;return Object(g.jsx)(V.a,{button:!0,selected:t===n.selectedDataSource.id,onClick:function(){return e={id:t,name:r,type:c,data:s},void a((function(t){return Object(o.a)(Object(o.a)({},t),{},{selectedDataSource:e})}));var e},children:Object(g.jsx)(J.a,{children:Object(g.jsx)(u.a,{mr:1,component:"span",children:Object(g.jsx)(W.a,{variant:"body1",component:"span",children:r})})})})}))})]}),Object(g.jsxs)(q.a,{item:!0,lg:10,children:[!n.selectedDataSource.name&&Object(g.jsx)(ue,{type:"add",title:"Add DataSource",onSubmit:b}),!!n.selectedDataSource.name&&Object(g.jsx)(ue,{type:"edit",title:"Edit DataSource",DataSource:n.selectedDataSource,onSubmit:m,deleteDataSource:p})]})]})},le=n(492),je=n(493),be=n(497),me=n(238),pe=n(239),he=n(112),Oe=n(109),fe=n(241),xe=function(e){var t=e.data;e.key;return console.log(t),Object(g.jsx)(le.a,{width:"99%",minWidth:300,minHeight:300,style:{background:"white"},children:Object(g.jsxs)(je.a,{width:300,height:200,data:t,margin:{top:5,right:30,left:20,bottom:5},children:[Object(g.jsx)(be.a,{strokeDasharray:"3 3"}),Object(g.jsx)(me.a,{dataKey:Object.keys(t[0])[0]}),Object(g.jsx)(pe.a,{}),Object(g.jsx)(he.a,{}),Object(g.jsx)(Oe.a,{}),Object(g.jsx)(fe.a,{type:"monotone",dataKey:"pv",stroke:"#8884d8",activeDot:{r:8}}),Object(g.jsx)(fe.a,{type:"monotone",dataKey:"uv",stroke:"#82ca9d"})]})})},ve=function(e){var t=r.a.useState({name:"",type:"default_option",data:[],selectedDataSource:{data:[],id:null,name:"default_option",type:null},datasource:null,id:null}),n=Object(v.a)(t,2),a=n[0],c=n[1],s=e.title,i=void 0===s?"Create Component":s,d=e.onSubmit,l=e.Component,j=e.type,b=Object(E.useIndexedDB)("datasources"),m=b.getAll,p=b.getByIndex;r.a.useEffect((function(){"edit"===j&&p("name",l.datasource).then((function(e){c((function(t){return Object(o.a)(Object(o.a)(Object(o.a)({},t),l),{},{selectedDataSource:e})}))})),m().then((function(e){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{data:e,loader:{message:"Data Source List Fetched!",status:!1}})}))}))}),[l]);var O=function(e,t){c((function(n,a){return Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t,e.target.value))}))},f=function(){return"edit"===j};return Object(g.jsxs)(K.a,{children:[Object(g.jsx)(W.a,{variant:"body1",gutterBottom:!0,children:i}),Object(g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d({name:a.name,datasource:a.selectedDataSource.name,type:a.type}),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:"",type:"default_option",data:[],selectedDataSource:{data:[],id:null,name:"default_option",type:null}})}))},children:Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:1,children:[Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{id:"componentname",placeholder:"Componentname",value:a.name,onChange:function(e){return O(e,"name")},variant:"outlined",size:"small",disabled:f()})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsxs)(B.a,{select:!0,size:"small",variant:"outlined",placeholder:"Select a Component Type",SelectProps:{value:a.type},onChange:function(e){return O(e,"type")},disabled:f(),children:[Object(g.jsx)(ee.a,{value:"default_option",disabled:!0,children:"Select a Component Type"}),Object(g.jsx)(ee.a,{value:"table",children:"Table"}),Object(g.jsx)(ee.a,{value:"simple_line_chart",children:"SimpleLineChart"})]})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsxs)(B.a,{select:!0,size:"small",variant:"outlined",placeholder:"Select a Component Type",SelectProps:{value:null!=a.selectedDataSource.id?a.selectedDataSource:"default_option"},onChange:function(e){return O(e,"selectedDataSource")},disabled:f(),children:[Object(g.jsx)(ee.a,{value:"default_option",disabled:!0,children:"Select a Data Source"}),a.data.map((function(e){return Object(g.jsx)(ee.a,{value:e,children:e.name})})),f()&&Object(g.jsx)(ee.a,{value:a.selectedDataSource,disabled:!0,children:a.selectedDataSource.name})]})})]})}),Object(g.jsxs)(q.a,{container:!0,style:{margin:8},spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:!f()&&Object(g.jsx)(h.a,{color:"secondary",fullWidth:!0,variant:"contained",size:"small",type:"submit",style:{textTransform:"none"},children:i})}),f()&&Object(g.jsx)(q.a,{item:!0})]})]})})}),a&&a.data&&Object(g.jsx)(q.a,{container:!0,children:Object(g.jsxs)(q.a,{item:!0,children:["table"==a.type&&a.selectedDataSource.data.length>0&&Object(g.jsx)(ie,{rows:a.selectedDataSource.data,column:Object.keys(a.selectedDataSource.data[0])}),"simple_line_chart"==a.type&&a.selectedDataSource.data.length>0&&Object(g.jsx)(xe,{data:a.selectedDataSource.data})]})})]})},ge=function(){var e=r.a.useState({components:[],loader:{status:!0,message:"Fetching Available Data Source!!"},error:{status:!1,message:""},selectedComponent:{}}),t=Object(v.a)(e,2),n=t[0],a=t[1],c=Object(E.useIndexedDB)("components"),s=c.add,i=c.getAll,d=c.update,l=c.deleteRecord;r.a.useEffect((function(){i().then((function(e){a((function(t){return Object(o.a)(Object(o.a)({},t),{},{components:e,loader:{message:"Components List Fetched!",status:!1}})}))}))}),[n.loader.status]);var j=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s(t);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{loader:{message:"Updating Component List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(A.a.mark((function e(t){var r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,c=t.data,!r){e.next=6;break}return e.next=4,d(Object(o.a)(Object(o.a)({},n.selectedComponent),{},{name:r,data:c}));case 4:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedComponent:{},loader:{message:"Updating Component List!",status:!0}})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,l(n.selectedComponent.id);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedComponent:{},loader:{message:"Updating Component List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(q.a,{container:!0,spacing:2,style:{flexWrap:"nowrap"},children:[Object(g.jsxs)(q.a,{item:!0,lg:2,alignItems:"center",direction:"column",justifyContent:"center",children:[Object(g.jsx)(h.a,{color:"secondary",size:"small",fullWidth:!0,style:{textTransform:"none"},variant:"contained",onClick:function(){a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedComponent:{}})}))},children:"Create New Component"}),Object(g.jsx)(R.a,{component:"nav",subheader:Object(g.jsx)(N.a,{component:"div",id:"nested-list-subheader",children:"Available Components"}),children:n.components.map((function(e){var t=e.id,r=e.name,c=e.type,s=e.datasource;return Object(g.jsx)(V.a,{button:!0,selected:t===n.selectedComponent.id,onClick:function(){return e={id:t,name:r,type:c,datasource:s},void a((function(t){return Object(o.a)(Object(o.a)({},t),{},{selectedComponent:e})}));var e},children:Object(g.jsx)(J.a,{children:Object(g.jsx)(u.a,{mr:1,component:"span",children:Object(g.jsx)(W.a,{variant:"body1",component:"span",children:r})})})})}))})]}),Object(g.jsxs)(q.a,{item:!0,lg:10,children:[!n.selectedComponent.name&&Object(g.jsx)(ve,{type:"add",title:"Add Component",onSubmit:j}),!!n.selectedComponent.name&&Object(g.jsx)(ve,{type:"edit",title:"Edit Component",Component:n.selectedComponent,onSubmit:b,deleteComponent:m})]})]})},ye=n(504),Se=n(135),De=(n(417),function(e){var t=e.name,n=e.components,a=Object(E.useIndexedDB)("datasources"),c=Object(E.useIndexedDB)("components"),s=Object(Se.WidthProvider)(Se.Responsive),i=r.a.useState({data:[]}),u=Object(v.a)(i,2),d=u[0],l=u[1];r.a.useEffect(Object(T.a)(A.a.mark((function e(){var t,r,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAll();case 2:return t=e.sent,e.next=5,c.getAll();case 5:r=e.sent,s=r.filter((function(e){var t=e.name;return n.includes(t)})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{data:t.filter((function(t){return t.name===e.datasource})).map((function(e){return e.data})).flat()})})),console.log(r),l((function(e){return Object(o.a)(Object(o.a)({},e),{},{data:s})}));case 9:case"end":return e.stop()}}),e)}))),[n]);var j="horizontal",b=!1,m=function(e,t,n,a){switch(e){case"table":return Object(g.jsx)(ie,{title:"Preview Table - ".concat(n),rows:t,totalRows:3,totalCols:3,column:Object.keys(t[0])},"".concat((new Date).getTime(),"-").concat(a));case"simple_line_chart":return Object(g.jsx)(xe,{title:"Preview Chart - ".concat(n),data:t},"".concat((new Date).getTime(),"-").concat(a))}};return Object(g.jsxs)(g.Fragment,{children:[console.log(d),Object(g.jsx)(W.a,{variant:"h6",children:t.toUpperCase()}),Object(g.jsx)(s,{measureBeforeMount:!1,useCSSTransforms:b,compactType:j,preventCollision:!j,children:d.data.map((function(e,t){return Object(g.jsx)("div",{"data-grid":{x:3*t,y:0,w:3,h:2,static:!1},style:{display:"flex",flexDirection:"column",alignItems:"center",padding:8},children:m(e.type,e.data,e.name,t)},"".concat((new Date).getTime(),"-").concat(t))}))})]})}),Ce=function(e){var t=r.a.useState({name:"",users:{list:[],selectedUser:[]},components:{list:[],selectedComponent:[]}}),n=Object(v.a)(t,2),a=n[0],c=n[1],s=e.title,i=void 0===s?"Create Dashboard":s,d=e.onSubmit,l=e.Dashboard,j=e.type,b=e.deleteDashboard,m=Object(E.useIndexedDB)("users"),p=Object(E.useIndexedDB)("components");r.a.useEffect((function(){"edit"===j&&(console.log(l),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:l.name,components:Object(o.a)(Object(o.a)({},e.components),{},{selectedComponent:l.components}),users:Object(o.a)(Object(o.a)({},e.users),{},{selectedUser:l.assigned_users})})}))),m.getAll().then((function(e){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{users:Object(o.a)(Object(o.a)({},t.users),{},{list:e}),loader:{message:"User List Fetched!",status:!1}})}))})),p.getAll().then((function(e){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{components:Object(o.a)(Object(o.a)({},t.components),{},{list:e}),loader:{message:"Components List Fetched!",status:!1}})}))}))}),[l]);var O=function(){return"edit"===j};return Object(g.jsxs)(K.a,{children:[Object(g.jsx)(W.a,{variant:"body1",gutterBottom:!0,children:i}),Object(g.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d({name:a.name,components:a.components.selectedComponent,assigned_users:a.users.selectedUser}),c((function(e){return{name:"",type:"default_option",data:null,users:{list:[],selectedUser:[]},components:{list:[],selectedComponent:[]}}}))},children:Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:1,children:[Object(g.jsx)(u.a,{m:1,children:Object(g.jsxs)(q.a,{container:!0,spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{id:"dashboardname",placeholder:"Dashboardname",value:a.name,onChange:function(e){return function(e,t){c((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(k.a)({},t,e.target.value))}))}(e,"name")},variant:"outlined",size:"small",disabled:O()})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{select:!0,size:"small",variant:"outlined",label:"Select Components",style:{minWidth:240},SelectProps:{multiple:!0,value:a.components.selectedComponent,renderValue:function(e){return e.join(", ")}},onChange:function(e){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{components:Object(o.a)(Object(o.a)({},t.components),{},{selectedComponent:e.target.value})})}))},children:a.components.list.map((function(e){return Object(g.jsxs)(ee.a,{value:e.name,children:[Object(g.jsx)(ye.a,{checked:a.components.selectedComponent.indexOf(e.name)>-1}),Object(g.jsx)(J.a,{primary:e.name})]},e.name)}))})}),Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(B.a,{select:!0,size:"small",variant:"outlined",label:"Assign Users",style:{minWidth:240},SelectProps:{multiple:!0,value:a.users.selectedUser,renderValue:function(e){return e.join(", ")}},onChange:function(e){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{users:Object(o.a)(Object(o.a)({},t.users),{},{selectedUser:e.target.value})})}))},children:a.users.list.map((function(e){return Object(g.jsxs)(ee.a,{value:e.username,children:[Object(g.jsx)(ye.a,{checked:a.users.selectedUser.indexOf(e.username)>-1}),Object(g.jsx)(J.a,{primary:e.username})]},e.username)}))})})]})}),Object(g.jsxs)(q.a,{container:!0,style:{margin:8},spacing:2,children:[Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"secondary",fullWidth:!0,variant:"contained",size:"small",type:"submit",style:{textTransform:"none"},children:i})}),O()&&Object(g.jsx)(q.a,{item:!0,children:Object(g.jsx)(h.a,{color:"primary",fullWidth:!0,variant:"contained",size:"small",onClick:function(e){e.preventDefault(),b(a),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{dashboardname:"",password:"",role:""})}))},style:{textTransform:"none"},children:"Delete Dashboard"})})]})]})})}),a&&a.components.selectedComponent&&Object(g.jsx)(De,{name:a.name,components:a.components.list.filter((function(e){return a.components.selectedComponent.includes(e.name)})).map((function(e){return e.name}))})]})},we=function(){var e=r.a.useState({dashboards:[],loader:{status:!0,message:"Fetching Available Data Source!!"},error:{status:!1,message:""},selectedDashboard:{}}),t=Object(v.a)(e,2),n=t[0],a=t[1],c=Object(E.useIndexedDB)("dashboards"),s=c.add,i=c.getAll,d=c.update,l=c.deleteRecord;r.a.useEffect((function(){i().then((function(e){a((function(t){return Object(o.a)(Object(o.a)({},t),{},{dashboards:e,loader:{message:"Dashboards List Fetched!",status:!1}})}))}))}),[n.loader.status]);var j=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s(t);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{loader:{message:"Updating Dashboard List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(A.a.mark((function e(t){var r,c,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,c=t.components,s=t.assigned_users,!r){e.next=6;break}return e.next=4,d(Object(o.a)(Object(o.a)({},n.selectedDashboard),{},{components:c,assigned_users:s}));case 4:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDashboard:{},loader:{message:"Updating Dashboard List!",status:!0}})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,l(n.selectedDashboard.id);case 3:e.sent,a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDashboard:{},loader:{message:"Updating Dashboard List!",status:!0}})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(q.a,{container:!0,spacing:2,style:{flexWrap:"nowrap"},children:[Object(g.jsxs)(q.a,{item:!0,lg:2,children:[Object(g.jsx)(h.a,{color:"secondary",size:"small",fullWidth:!0,style:{textTransform:"none"},variant:"contained",onClick:function(){a((function(e){return Object(o.a)(Object(o.a)({},e),{},{selectedDashboard:{}})}))},children:"Create New Dashboard"}),Object(g.jsx)(R.a,{component:"nav",subheader:Object(g.jsx)(N.a,{component:"div",id:"nested-list-subheader",children:"Available Dashboards"}),children:n.dashboards.map((function(e,t){var r=e.id,c=e.name,s=e.components,i=e.assigned_users;return Object(g.jsx)(V.a,{button:!0,selected:r===n.selectedDashboard.id,onClick:function(){return e={id:r,name:c,components:s,assigned_users:i},void a((function(t){return Object(o.a)(Object(o.a)({},t),{},{selectedDashboard:e})}));var e},children:Object(g.jsx)(J.a,{children:Object(g.jsx)(u.a,{mr:1,component:"span",children:Object(g.jsx)(W.a,{variant:"body1",component:"span",children:c})})})},"ds-mgmt-list-".concat(t))}))})]}),Object(g.jsxs)(q.a,{item:!0,lg:10,children:[!n.selectedDashboard.name&&Object(g.jsx)(Ce,{type:"add",title:"Add Dashboard",onSubmit:j}),!!n.selectedDashboard.name&&Object(g.jsx)(Ce,{type:"edit",title:"Edit Dashboard",Dashboard:n.selectedDashboard,onSubmit:b,deleteDashboard:m})]})]})},ke=function(){var e=C().user,t=Object(E.useIndexedDB)("dashboards"),n=(t.getByIndex,t.getAll),a=(t.update,t.deleteRecord,r.a.useState([])),c=Object(v.a)(a,2),s=c[0],o=c[1];return r.a.useEffect((function(){e&&n().then((function(t){var n=t.filter((function(t){return t.assigned_users.includes(e.username)}));o(n)}))}),[]),Object(g.jsxs)(u.a,{children:[e&&e.isAuthenticated&&s.length>0?s.map((function(e){return Object(g.jsxs)("span",{children:[" ",Object(g.jsx)(De,{name:e.name,components:e.components})," "]})})):Object(g.jsx)(W.a,{variant:"body1",children:"No Dashboards Available."}),!e&&Object(g.jsx)(W.a,{variant:"body1",children:" User Need To Login "})]})},Ue=["children"];function Ae(e){var t=e.children,n=Object(i.a)(e,Ue),a=C();return Object(g.jsx)(d.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){e.location;return a.user&&"admin"==a.user.role?t:Object(g.jsx)(d.a,{to:{pathname:"/"}})}}))}function Te(){return Object(g.jsx)(D,{children:Object(g.jsxs)(l.a,{basename:"/react-dashboard-generator",children:[Object(g.jsx)(w,{}),Object(g.jsx)(u.a,{style:{marginTop:72},children:Object(g.jsxs)(d.d,{children:[Object(g.jsx)(Ae,{path:"/datasources",children:Object(g.jsx)(de,{})}),Object(g.jsx)(Ae,{path:"/usermanagement",children:Object(g.jsx)($,{})}),Object(g.jsx)(Ae,{path:"/components",children:Object(g.jsx)(ge,{})}),Object(g.jsx)(Ae,{path:"/dashboard",children:Object(g.jsx)(we,{})}),Object(g.jsx)(d.b,{path:"/my-dashboard",children:Object(g.jsx)(ke,{})}),Object(g.jsx)(d.b,{path:"/",children:Object(g.jsx)(F,{})})]})})]})})}Object(E.initDB)({name:"TechChallenge",version:5,objectStoresMeta:[{store:"users",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"username",keypath:"username",options:{unique:!0}},{name:"password",keypath:"password",options:{unique:!1}},{name:"role",keypath:"role",options:{unique:!1}}]},{store:"datasources",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"type",keypath:"type",options:{unique:!1}},{name:"path",keypath:"path",options:{unique:!0}},{name:"dataset",keypath:"dataset",options:{unique:!1}}]},{store:"components",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"type",keypath:"type",options:{unique:!1}},{name:"datasource",keypath:"datasource",options:{unique:!1}},{name:"config",keypath:"config",options:{unique:!1}}]},{store:"dashboards",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"components",keypath:"components",options:{unique:!1}},{name:"assigned_users",keypath:"assigned_users",options:{unique:!1}}]}]});var Ie=document.getElementById("root");s.a.render(Object(g.jsx)(Te,{}),Ie)}},[[418,1,2]]]);
//# sourceMappingURL=main.98a70357.chunk.js.map